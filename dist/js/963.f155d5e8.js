"use strict";(self["webpackChunkpros_project"]=self["webpackChunkpros_project"]||[]).push([[963],{9266:function(e,t,l){l.r(t),l.d(t,{default:function(){return Y}});var a=l(6252),o=l(9963),n=l(2262),s=l(3577),r=l(4642);function i(){const e=(0,r.a)(),t=(0,n.iH)(!0),l=(0,n.iH)(!1),o=(0,n.iH)(0),s=(0,n.iH)(0),i=(0,n.iH)([]),u=6,c=1,d=6,v=(0,a.Fl)((()=>({maxAttributes:u,threshold:d,willDeleteFullRow:s.value>d,availableAttributes:m()})));function m(){const t=e.getActiveRows[0];return t?Object.keys(t).filter((e=>!["id","decision","status","deletedAt","fullRowDeleted","deletedAttributes"].includes(e))).length:0}function p(){if(!f())return;const l=s.value>d;if(l&&!t.value){const e=confirm(`Wybrano ${s.value} atrybutów do usunięcia. Ponieważ przekracza to próg ${d} atrybutów, wybrane wiersze zostaną całkowicie usunięte. Czy kontynuować?`);if(!e)return}const a={isRandom:t.value,forceRowDeletion:l,propertyQuantity:l?0:Math.min(s.value,u),rowQuantity:t.value?o.value:i.value.length,rows:t.value?[]:i.value},n=performance.now();e.deleteTableRows(a);const r=performance.now();y(a,r-n),t.value||(i.value=[])}function y(t,a){const o=e.getDeletionStatistics,n=e.getDataQualityMetrics;console.log("=== RAPORT USUWANIA DANYCH ==="),console.log(`Czas wykonania: ${a.toFixed(2)} ms`),console.log("Typ operacji: "+(t.forceRowDeletion?"Pełne usunięcie wierszy":"Częściowe usunięcie atrybutów")),console.log(`Liczba przetworzonych wierszy: ${t.rowQuantity}`),t.forceRowDeletion||console.log(`Liczba usuniętych atrybutów na wiersz: ${t.propertyQuantity}`),console.log(`Całkowita kompletność danych: ${n.dataCompleteness.toFixed(1)}%`),console.log("Statystyki usunięć:",o),l.value=!0}function f(){if(t.value){if(o.value<c)return console.error(`Należy usunąć co najmniej ${c} wierszy`),!1;if(o.value>e.getActiveRows.length)return console.error(`Nie można usunąć więcej wierszy niż dostępnych (${e.getActiveRows.length})`),!1;if(s.value<1)return console.error("Należy usunąć co najmniej 1 atrybut"),!1;const t=m();if(s.value>t)return console.error(`Nie można usunąć więcej atrybutów niż dostępnych (${t})`),!1}else{if(0===i.value.length)return console.error("Nie wybrano wierszy do usunięcia"),!1;if(i.value.length>e.getActiveRows.length)return console.error("Wybrano więcej wierszy niż dostępnych"),!1}return!0}function b(){t.value=!1,o.value=0,s.value=0,i.value=[],l.value=!1,console.log("Parametry usuwania zostały zresetowane")}function w(){if(!f())return null;const l=e.getDataQualityMetrics,a=t.value?o.value:i.value.length,n=s.value>d,r=n?l.activeRecords-a:l.activeRecords,u=l.totalRecords>0?r/l.totalRecords*100:100;return{currentCompleteness:l.dataCompleteness,predictedCompleteness:u,completenessChange:u-l.dataCompleteness,willDeleteFullRows:n,affectedRows:a,recommendedAction:u<50?"OSTRZEŻENIE: Operacja może znacząco obniżyć jakość danych":"Operacja powinna być bezpieczna"}}function g(){const t=e.getDataQualityMetrics,l=m(),a={maxSafeRows:Math.floor(.2*t.activeRecords),maxSafeAttributes:Math.min(3,l),reasoning:[]};return t.dataCompleteness<80&&(a.maxSafeRows=Math.floor(.1*t.activeRecords),a.reasoning.push("Obniżono limit wierszy z powodu niskiej kompletności danych")),l<=5&&(a.maxSafeAttributes=1,a.reasoning.push("Ograniczono liczbę atrybutów z powodu małej liczby dostępnych cech")),a.reasoning.push(`Próg pełnego usunięcia: ${d} atrybutów`),a}function h(){const l=e.exportDeletionReport(),a=w(),n=g();return{...l,currentParameters:{isDeletingRandom:t.value,rowsToDelete:t.value?o.value:i.value.length,attributesToDelete:s.value,thresholds:{maxAttributes:u,fullDeletionThreshold:d}},predictedImpact:a,suggestions:n}}return{isDeletingRandom:t,isInfoVisible:l,randomRowsToDeleteQuantity:o,randomAttributesToDeleteQuantity:s,selectedRowsToDelete:i,deletionInfo:v,deleteData:p,resetDeletionParameters:b,predictDeletionImpact:w,suggestOptimalParameters:g,exportDeletionReport:h,MAX_ATTRIBUTES_TO_DELETE:u,ATTRIBUTE_THRESHOLD_FOR_FULL_DELETION:d}}var u=l(6919),c=l(6673),d=l(6499),v=l(9728),m=l(9483),p=l(9e3),y=l(6719),f=l(3099);const b=(0,y.ev)()({name:"VForm",props:{...(0,p.l)(),...(0,v.vC)()},emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:l,emit:o}=t;const s=(0,v.Np)(e),r=(0,n.iH)();function i(e){e.preventDefault(),s.reset()}function u(e){const t=e,l=s.validate();t.then=l.then.bind(l),t.catch=l.catch.bind(l),t.finally=l.finally.bind(l),o("submit",t),t.defaultPrevented||l.then((e=>{let{valid:t}=e;t&&r.value?.submit()})),t.preventDefault()}return(0,f.L)((()=>(0,a.Wm)("form",{ref:r,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:i,onSubmit:u},[l.default?.(s)]))),(0,m.F)(s,r)}});var w=l(8623),g=l(6454),h=l(4203),D=l(6947),R=l(9680),k=l(3632),_=l(8247),C=l(2716),z=l(2323),x=l(6054),S=l(6533);const T=(0,S.U)({color:String,...(0,g.m)(),...(0,p.l)(),...(0,h.x)(),...(0,D.c)(),...(0,R.y)(),...(0,k.F)(),...(0,_.I)(),...(0,C.Q)(),...(0,z.x$)()},"v-sheet"),A=(0,y.ev)()({name:"VSheet",props:{...T()},setup(e,t){let{slots:l}=t;const{themeClasses:o}=(0,z.ER)(e),{backgroundColorClasses:s,backgroundColorStyles:r}=(0,x.Y5)((0,n.Vh)(e,"color")),{borderClasses:i}=(0,g.P)(e),{dimensionStyles:u}=(0,h.$)(e),{elevationClasses:c}=(0,D.Y)(e),{locationStyles:d}=(0,R.T)(e),{positionClasses:v}=(0,k.K)(e),{roundedClasses:m}=(0,_.b)(e);return(0,f.L)((()=>(0,a.Wm)(e.tag,{class:["v-sheet",o.value,s.value,i.value,c.value,v.value,m.value,e.class],style:[r.value,u.value,d.value,e.style]},l))),{}}});var V=l(3505);const W=e=>((0,a.dD)("data-v-47dffaa2"),e=e(),(0,a.Cn)(),e),U={class:"deleting-panel"},j=W((()=>(0,a._)("div",{class:"deleting-panel__title text-h4 mb-4 d-flex justify-center"}," Deleting Panel ",-1))),F={style:{"min-height":"80px"}},I={key:1,class:"random-deletion-controls"},$={class:"deletion-summary"},E={class:"font-weight-bold"},O={class:"action-buttons"};var P={__name:"deletingPanel",props:{restoreAccepted:Boolean},emits:["openModal"],setup(e,{emit:t}){const l=e,v=(0,r.a)(),m=(0,n.iH)(null),{deleteData:p,isDeletingRandom:y,isInfoVisible:f,randomRowsToDeleteQuantity:g,randomAttributesToDeleteQuantity:h,selectedRowsToDelete:D,resetDeletionParameters:R}=i(),k=(0,a.Fl)((()=>Array.from({length:v.getTableItems.length},((e,t)=>t)).filter((e=>"deleted"!==v.getTableItems[e]?.status)))),_=(0,a.Fl)((()=>v.getTableItems.filter((e=>"deleted"!==e.status)).length)),C=(0,a.Fl)((()=>h.value*g.value)),z=(0,a.Fl)((()=>v.getDeletedRows.length>0||(y.value?g.value<1:D.value.length<1))),x=(0,a.Fl)((()=>!y.value&&D.value.length>0));function S(){m.value&&m.value.reset(),R()}function T(){D.value=[],g.value=1,h.value=1}function W(){m.value&&!m.value.validate()||t("openModal")}return(0,a.YP)((()=>l.restoreAccepted),(e=>{e&&p()})),(e,t)=>((0,a.wg)(),(0,a.iD)("div",U,[(0,a.Wm)(A,{class:"mx-auto"},{default:(0,a.w5)((()=>[j,(0,a.Wm)(b,{ref_key:"form",ref:m},{default:(0,a.w5)((()=>[(0,a._)("div",F,[(0,n.SU)(y)?((0,a.wg)(),(0,a.iD)("div",I,[(0,a.Wm)(V.R,{modelValue:(0,n.SU)(g),"onUpdate:modelValue":t[1]||(t[1]=e=>(0,n.dq)(g)?g.value=e:null),rules:[e=>e>0||"Must delete at least one row"],min:1,max:_.value,step:1,"thumb-label":"",color:"orange",label:"Rows to delete"},null,8,["modelValue","rules","max"]),(0,a.Wm)(V.R,{modelValue:(0,n.SU)(h),"onUpdate:modelValue":t[2]||(t[2]=e=>(0,n.dq)(h)?h.value=e:null),rules:[e=>e>0||"Must delete at least one attribute"],min:1,max:10,step:1,"thumb-label":"",color:"red",label:"Attributes to delete per row"},null,8,["modelValue","rules"]),(0,a._)("div",$,[(0,a._)("div",null,"Attributes to delete: "+(0,s.zw)((0,n.SU)(h)),1),(0,a._)("div",null,"Rows to delete: "+(0,s.zw)((0,n.SU)(g)),1),(0,a._)("div",E,"Total changes: "+(0,s.zw)(C.value),1)])])):((0,a.wg)(),(0,a.j4)(w.r,{key:0,modelValue:(0,n.SU)(D),"onUpdate:modelValue":t[0]||(t[0]=e=>(0,n.dq)(D)?D.value=e:null),items:k.value,rules:[e=>!!e.length||"At least one row must be selected"],label:"Rows to delete",multiple:"",chips:"",clearable:""},null,8,["modelValue","items","rules"]))]),(0,a.Wm)(d.x,{modelValue:(0,n.SU)(y),"onUpdate:modelValue":t[3]||(t[3]=e=>(0,n.dq)(y)?y.value=e:null),label:"Random deletion",onChange:T},null,8,["modelValue"]),(0,a._)("div",O,[(0,a.Wm)(c.T,{disabled:z.value,color:"success",class:"mt-4",block:"",onClick:W},{default:(0,a.w5)((()=>[(0,a.Uk)(" Delete Data ")])),_:1},8,["disabled"]),(0,a.Wm)(o.uT,{name:"fade"},{default:(0,a.w5)((()=>[x.value?((0,a.wg)(),(0,a.j4)(c.T,{key:0,color:"error",class:"mt-4",block:"",onClick:S},{default:(0,a.w5)((()=>[(0,a.Uk)(" Reset Form ")])),_:1})):(0,a.kq)("",!0)])),_:1})])])),_:1},512)])),_:1}),(0,a.Wm)(o.uT,{name:"fade"},{default:(0,a.w5)((()=>[(0,n.SU)(f)?((0,a.wg)(),(0,a.j4)(u.w,{key:0,type:"success",title:"Deletion Complete",class:"mt-4 deletion-alert",text:"Data has been successfully modified. Check the data table or graphs to see changes."})):(0,a.kq)("",!0)])),_:1})]))}},M=l(3744);const Q=(0,M.Z)(P,[["__scopeId","data-v-47dffaa2"]]);var H=Q,L=l(7740);const N={class:"deleting"};var B={__name:"dataDeletingView",setup(e){const t=(0,n.iH)(!1),l=(0,n.iH)(!1);return(e,n)=>((0,a.wg)(),(0,a.iD)("div",N,[(0,a.Wm)(H,{onOpenModal:n[0]||(n[0]=e=>t.value=!0),restoreAccepted:l.value},null,8,["restoreAccepted"]),(0,a.Wm)(o.uT,null,{default:(0,a.w5)((()=>[t.value?((0,a.wg)(),(0,a.j4)(L.Z,{key:0,onClose:n[1]||(n[1]=e=>t.value=!1),"accept-text":"Delete data","header-text":"Data deleting",onAccept:n[2]||(n[2]=e=>l.value=!0)},{default:(0,a.w5)((()=>[(0,a.Uk)(" Are you sure you want to delete data? ")])),_:1})):(0,a.kq)("",!0)])),_:1})]))}};const q=(0,M.Z)(B,[["__scopeId","data-v-2c42fa76"]]);var Y=q},6919:function(e,t,l){l.d(t,{w:function(){return z}});var a=l(6252),o=l(5988);const n=(0,o.J)("v-alert-title");var s=l(6673),r=l(875),i=l(7737),u=l(9748),c=l(6596),d=l(9e3),v=l(8942),m=l(4203),p=l(6947),y=l(9680),f=l(3632),b=l(8247),w=l(2716),g=l(2323),h=l(8475),D=l(1316),R=l(6054),k=l(2262),_=l(6719);const C=["success","info","warning","error"],z=(0,_.ev)()({name:"VAlert",props:{border:{type:[Boolean,String],validator:e=>"boolean"===typeof e||["top","end","bottom","start"].includes(e)},borderColor:String,closable:Boolean,closeIcon:{type:c.lE,default:"$close"},closeLabel:{type:String,default:"$vuetify.close"},icon:{type:[Boolean,String,Function,Object],default:null},modelValue:{type:Boolean,default:!0},prominent:Boolean,title:String,text:String,type:{type:String,validator:e=>C.includes(e)},...(0,d.l)(),...(0,v.f)(),...(0,m.x)(),...(0,p.c)(),...(0,y.y)(),...(0,f.F)(),...(0,b.I)(),...(0,w.Q)(),...(0,g.x$)(),...(0,u.bk)({variant:"flat"})},emits:{"click:close":e=>!0,"update:modelValue":e=>!0},setup(e,t){let{emit:l,slots:o}=t;const c=(0,D.z)(e,"modelValue"),d=(0,a.Fl)((()=>{if(!1!==e.icon)return e.type?e.icon??`$${e.type}`:e.icon})),w=(0,a.Fl)((()=>({color:e.color??e.type,variant:e.variant}))),{themeClasses:_}=(0,g.ER)(e),{colorClasses:C,colorStyles:z,variantClasses:x}=(0,u.c1)(w),{densityClasses:S}=(0,v.t)(e),{dimensionStyles:T}=(0,m.$)(e),{elevationClasses:A}=(0,p.Y)(e),{locationStyles:V}=(0,y.T)(e),{positionClasses:W}=(0,f.K)(e),{roundedClasses:U}=(0,b.b)(e),{textColorClasses:j,textColorStyles:F}=(0,R.rY)((0,k.Vh)(e,"borderColor")),{t:I}=(0,h.bU)(),$=(0,a.Fl)((()=>({"aria-label":I(e.closeLabel),onClick(e){c.value=!1,l("click:close",e)}})));return()=>{const t=!(!o.prepend&&!d.value),l=!(!o.title&&!e.title),v=!(!e.text&&!o.text),m=!(!o.close&&!e.closable);return c.value&&(0,a.Wm)(e.tag,{class:["v-alert",e.border&&{"v-alert--border":!!e.border,[`v-alert--border-${!0===e.border?"start":e.border}`]:!0},{"v-alert--prominent":e.prominent},_.value,C.value,S.value,A.value,W.value,U.value,x.value,e.class],style:[z.value,T.value,V.value,e.style],role:"alert"},{default:()=>[(0,u.Ux)(!1,"v-alert"),e.border&&(0,a.Wm)("div",{key:"border",class:["v-alert__border",j.value],style:F.value},null),t&&(0,a.Wm)("div",{key:"prepend",class:"v-alert__prepend"},[o.prepend?(0,a.Wm)(r.z,{key:"prepend-defaults",disabled:!d.value,defaults:{VIcon:{density:e.density,icon:d.value,size:e.prominent?44:28}}},o.prepend):(0,a.Wm)(i.t,{key:"prepend-icon",density:e.density,icon:d.value,size:e.prominent?44:28},null)]),(0,a.Wm)("div",{class:"v-alert__content"},[l&&(0,a.Wm)(n,{key:"title"},{default:()=>[o.title?.()??e.title]}),v&&(o.text?.()??e.text),o.default?.()]),o.append&&(0,a.Wm)("div",{key:"append",class:"v-alert__append"},[o.append()]),m&&(0,a.Wm)("div",{key:"close",class:"v-alert__close"},[o.close?(0,a.Wm)(r.z,{key:"close-defaults",defaults:{VBtn:{icon:e.closeIcon,size:"x-small",variant:"text"}}},{default:()=>[o.close?.({props:$.value})]}):(0,a.Wm)(s.T,(0,a.dG)({key:"close-btn",icon:e.closeIcon,size:"x-small",variant:"text"},$.value),null)])]})}}})}}]);
//# sourceMappingURL=963.f155d5e8.js.map